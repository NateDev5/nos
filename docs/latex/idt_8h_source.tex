\doxysection{idt.\+h}
\hypertarget{idt_8h_source}{}\label{idt_8h_source}\index{x86\_32/src/kernel/interrupts/idt.h@{x86\_32/src/kernel/interrupts/idt.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//https://github.com/dreamportdev/Osdev-\/Notes/blob/master/02\_Architecture/05\_InterruptHandling.md}}
\DoxyCodeLine{00002\ \textcolor{comment}{//https://pdos.csail.mit.edu/6.828/2005/lec/lec8-\/slides.pdf}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00005\ }
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <utils/types.h>}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#define\ INTERRUPT\_GATE\ \ \ \ \ \ \ 0x8E\ }\textcolor{comment}{//\ p=1,\ dpl=0,\ type=0xE}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#define\ TRAP\_GATE\ \ \ \ \ \ \ \ \ \ \ \ 0x8F\ }\textcolor{comment}{//\ p=1,\ dpl=0,\ type=0xF}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#define\ TASK\_GATE\ \ \ \ \ \ \ \ \ \ \ \ 0x85\ }\textcolor{comment}{//\ p=1,\ dpl=0,\ type=0x5}}
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00012\ \textcolor{keyword}{namespace\ }Interrupts::IDT\ \{}
\DoxyCodeLine{00013\ \ \ \ \ \textcolor{comment}{//\ packed\ attribute\ used\ to\ ensure\ there\ are\ no\ extra\ bits}}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00015\ \ \ \ \ \textcolor{comment}{//\ IDT\ entry}}
\DoxyCodeLine{00016\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structInterrupts_1_1IDT_1_1IDT__ENTRY}{IDT\_ENTRY}}}
\DoxyCodeLine{00017\ \ \ \ \ \{}
\DoxyCodeLine{00018\ \ \ \ \ \ \ \ \ uint16\ isr\_add\_low;}
\DoxyCodeLine{00019\ \ \ \ \ \ \ \ \ uint16\ selector;}
\DoxyCodeLine{00020\ \ \ \ \ \ \ \ \ uint8\ zero;}
\DoxyCodeLine{00021\ \ \ \ \ \ \ \ \ uint8\ attributes;\ \textcolor{comment}{//\ gate\ type,\ dpl\ (cpu\ privilege),\ P\ (present\ bit,\ must\ be\ 1\ for\ the\ descriptor\ to\ be\ valid)}}
\DoxyCodeLine{00022\ \ \ \ \ \ \ \ \ uint16\ isr\_add\_high;}
\DoxyCodeLine{00023\ \ \ \ \ \}\ \_\_attribute\_\_((packed))\ \mbox{\hyperlink{structInterrupts_1_1IDT_1_1IDT__ENTRY}{IDT\_ENTRY}};}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \ \ \ \ \textcolor{comment}{//\ IDT\ register}}
\DoxyCodeLine{00026\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structInterrupts_1_1IDT_1_1IDTR}{IDTR}}}
\DoxyCodeLine{00027\ \ \ \ \ \{}
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ \ uint16\ limit;\ \textcolor{comment}{//\ the\ size\ of\ the\ idt\ need\ to\ be\ one\ less\ than\ the\ actual\ size}}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ uint32\ base;\ \textcolor{comment}{//\ base\ address\ of\ IDT}}
\DoxyCodeLine{00030\ \ \ \ \ \}\ \_\_attribute\_\_((packed))\ \mbox{\hyperlink{structInterrupts_1_1IDT_1_1IDTR}{IDTR}};}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \ \ \ \ \textcolor{keywordtype}{void}\ setup(IN\ \textcolor{keywordtype}{bool}\ verbose);}
\DoxyCodeLine{00033\ \ \ \ \ \textcolor{keywordtype}{void}\ set\_IDT\_entry\ (IN\ uint8\ vector,\ IN\ PTR\ handler,\ IN\ uint8\ attributes);}
\DoxyCodeLine{00034\ \ \ \ \ }
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structInterrupts_1_1IDT_1_1InterruptFrame}{InterruptFrame}}\ \{}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ uint32\ ip;}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ uint32\ cs;}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ uint32\ flags;}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ uint32\ sp;}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ uint32\ ss;}
\DoxyCodeLine{00041\ \ \ \ \ \}\ \mbox{\hyperlink{structInterrupts_1_1IDT_1_1InterruptFrame}{InterruptFrame}};}
\DoxyCodeLine{00042\ \}}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ \textcolor{keyword}{extern}\ \textcolor{stringliteral}{"{}C"{}}\ \textcolor{keywordtype}{void}\ handle\_exception\ (IN\ uint32\ vector,\ IN\ uint32\ error\_code);}

\end{DoxyCode}
