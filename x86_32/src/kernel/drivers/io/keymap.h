#pragma once

#include <utils/types.h>

#include <kernel/devices/io/ps2_scancodes.h>
#include <kernel/drivers/io/keycodes.h>

#define KEYCODE_MAP_LEN              85
#define KEYCODE_MAP_EXTENDED_LEN     17

namespace Drivers::Keyboard {
    static constexpr uint8 keycodeMap[][2] = {
        {PS2_SCANCODE_A, KEYCODE_A},
        {PS2_SCANCODE_B, KEYCODE_B},
        {PS2_SCANCODE_C, KEYCODE_C},
        {PS2_SCANCODE_D, KEYCODE_D},
        {PS2_SCANCODE_E, KEYCODE_E},
        {PS2_SCANCODE_F, KEYCODE_F},
        {PS2_SCANCODE_G, KEYCODE_G},
        {PS2_SCANCODE_H, KEYCODE_H},
        {PS2_SCANCODE_I, KEYCODE_I},
        {PS2_SCANCODE_J, KEYCODE_J},
        {PS2_SCANCODE_K, KEYCODE_K},
        {PS2_SCANCODE_L, KEYCODE_L},
        {PS2_SCANCODE_M, KEYCODE_M},
        {PS2_SCANCODE_N, KEYCODE_N},
        {PS2_SCANCODE_O, KEYCODE_O},
        {PS2_SCANCODE_P, KEYCODE_P},
        {PS2_SCANCODE_Q, KEYCODE_Q},
        {PS2_SCANCODE_R, KEYCODE_R},
        {PS2_SCANCODE_S, KEYCODE_S},
        {PS2_SCANCODE_T, KEYCODE_T},
        {PS2_SCANCODE_U, KEYCODE_U},
        {PS2_SCANCODE_V, KEYCODE_V},
        {PS2_SCANCODE_W, KEYCODE_W},
        {PS2_SCANCODE_X, KEYCODE_X},
        {PS2_SCANCODE_Y, KEYCODE_Y},
        {PS2_SCANCODE_Z, KEYCODE_Z},
        {PS2_SCANCODE_0, KEYCODE_0},
        {PS2_SCANCODE_1, KEYCODE_1},
        {PS2_SCANCODE_2, KEYCODE_2},
        {PS2_SCANCODE_3, KEYCODE_3},
        {PS2_SCANCODE_4, KEYCODE_4},
        {PS2_SCANCODE_5, KEYCODE_5},
        {PS2_SCANCODE_6, KEYCODE_6},
        {PS2_SCANCODE_7, KEYCODE_7},
        {PS2_SCANCODE_8, KEYCODE_8},
        {PS2_SCANCODE_9, KEYCODE_9},
        {PS2_SCANCODE_F1, KEYCODE_F1},
        {PS2_SCANCODE_F2, KEYCODE_F2},
        {PS2_SCANCODE_F3, KEYCODE_F3},
        {PS2_SCANCODE_F4, KEYCODE_F4},
        {PS2_SCANCODE_F5, KEYCODE_F5},
        {PS2_SCANCODE_F6, KEYCODE_F6},
        {PS2_SCANCODE_F7, KEYCODE_F7},
        {PS2_SCANCODE_F8, KEYCODE_F8},
        {PS2_SCANCODE_F9, KEYCODE_F9},
        {PS2_SCANCODE_F10, KEYCODE_F10},
        {PS2_SCANCODE_F11, KEYCODE_F11},
        {PS2_SCANCODE_F12, KEYCODE_F12},
        {PS2_SCANCODE_TILDE, KEYCODE_TILDE},
        {PS2_SCANCODE_MINUS, KEYCODE_MINUS},
        {PS2_SCANCODE_EQUAL, KEYCODE_EQUAL},
        {PS2_SCANCODE_LBRACKET, KEYCODE_LBRACKET},
        {PS2_SCANCODE_RBRACKET, KEYCODE_RBRACKET},
        {PS2_SCANCODE_BACK_SLASH, KEYCODE_BACK_SLASH},
        {PS2_SCANCODE_SEMICOLON, KEYCODE_SEMICOLON},
        {PS2_SCANCODE_APOSTROPHE, KEYCODE_APOSTROPHE},
        {PS2_SCANCODE_COMMA, KEYCODE_COMMA},
        {PS2_SCANCODE_PERIOD, KEYCODE_PERIOD},
        {PS2_SCANCODE_FORWARD_SLASH, KEYCODE_FORWARD_SLASH},
        {PS2_SCANCODE_BACKSPACE, KEYCODE_BACKSPACE},
        {PS2_SCANCODE_SPACE, KEYCODE_SPACE},
        {PS2_SCANCODE_TAB, KEYCODE_TAB},
        {PS2_SCANCODE_CAPS, KEYCODE_CAPS},
        {PS2_SCANCODE_LSHFT, KEYCODE_LSHFT},
        {PS2_SCANCODE_RSHFT, KEYCODE_RSHFT},
        {PS2_SCANCODE_LCTRL, KEYCODE_LCTRL},
        {PS2_SCANCODE_LALT, KEYCODE_LALT},
        {PS2_SCANCODE_ENTER, KEYCODE_ENTER},
        {PS2_SCANCODE_ESC, KEYCODE_ESC},
        {PS2_SCANCODE_NUM, KEYCODE_NUM},
        {PS2_SCANCODE_KP_MULT, KEYCODE_INVALID},
        {PS2_SCANCODE_KP_MINUS, KEYCODE_INVALID},
        {PS2_SCANCODE_KP_PLUS, KEYCODE_INVALID},
        {PS2_SCANCODE_KP_PERIOD, KEYCODE_INVALID},
        {PS2_SCANCODE_KP0, KEYCODE_INVALID},
        {PS2_SCANCODE_KP1, KEYCODE_INVALID},
        {PS2_SCANCODE_KP2, KEYCODE_INVALID},
        {PS2_SCANCODE_KP3, KEYCODE_INVALID},
        {PS2_SCANCODE_KP4, KEYCODE_INVALID},
        {PS2_SCANCODE_KP5, KEYCODE_INVALID},
        {PS2_SCANCODE_KP6, KEYCODE_INVALID},
        {PS2_SCANCODE_KP7, KEYCODE_INVALID},
        {PS2_SCANCODE_KP8, KEYCODE_INVALID},
        {PS2_SCANCODE_KP9, KEYCODE_INVALID},
        {PS2_SCANCODE_SCROLL, KEYCODE_INVALID}
    };

    static constexpr uint8 keycodeMapExtended [][2] = {
        {PS2_SCANCODE_RCTRL, KEYCODE_RCTRL},
        {PS2_SCANCODE_RALT, KEYCODE_RALT},
        {PS2_SCANCODE_LWIN, KEYCODE_LWIN},
        {PS2_SCANCODE_RWIN, KEYCODE_RWIN},
        {PS2_SCANCODE_INSERT, KEYCODE_INSERT},
        {PS2_SCANCODE_DELETE, KEYCODE_DELETE},
        {PS2_SCANCODE_HOME, KEYCODE_HOME},
        {PS2_SCANCODE_END, KEYCODE_END},
        {PS2_SCANCODE_PGUP, KEYCODE_PGUP},
        {PS2_SCANCODE_PGDN, KEYCODE_PGDN},
        {PS2_SCANCODE_UARROW, KEYCODE_UARROW},
        {PS2_SCANCODE_LARROW, KEYCODE_LARROW},
        {PS2_SCANCODE_DARROW, KEYCODE_DARROW},
        {PS2_SCANCODE_RARROW, KEYCODE_RARROW},
        {PS2_SCANCODE_KP_FORWARD_SLASH, KEYCODE_INVALID},
        {PS2_SCANCODE_KPEN, KEYCODE_INVALID},
        {PS2_SCANCODE_APPS, KEYCODE_INVALID},
    };
}